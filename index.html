<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Home Purchase & Sale Calculators</title>
<style>
  body { font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial; margin: 18px; color:#0f172a; }
  h1 { margin-bottom: 6px; font-size: 20px; }
  .tabs { display:flex; gap:8px; margin-bottom:12px; }
  .tab { padding:8px 12px; border-radius:8px; background:#f1f5f9; cursor:pointer; }
  .tab.active { background:#0ea5e9; color:white; }
  .panel { display:none; padding:12px; border-radius:8px; box-shadow: 0 6px 18px rgba(2,6,23,0.06); background:white; }
  .panel.active { display:block; }
  .grid { display:grid; grid-template-columns: 260px 1fr; gap:8px 16px; align-items:center; margin-bottom:12px; }
  label { font-size:13px; }
  input[type="number"], input[type="text"], select { width:100%; padding:8px; border-radius:6px; border:1px solid #e6eef6; }
  .row { display:flex; gap:8px; align-items:center; }
  .card { padding:12px; border-radius:8px; background:#f8fafc; }
  .result { font-weight:700; font-size:18px; }
  button { background:#0ea5e9; color:white; border:0; padding:8px 12px; border-radius:6px; cursor:pointer; }
  small { color:#64748b; display:block; margin-top:4px; }
  .link { margin-top:8px; display:inline-block; color:#0ea5e9; }
  footer { margin-top:20px; color:#475569; font-size:13px; }
.style2 {color: #0099FF}
</style>
</head>
<body>

<h1 class="style2">Home Purchase & Home Sale Calculators</h1>
<div class="tabs">
  <div class="tab active" data-target="purchase">Home Purchase Estimator</div>
  <div class="tab" data-target="sell">Home Sale Proceeds Estimator</div>
</div>

<!-- Purchase panel -->
<div id="purchase" class="panel active">
  <div class="grid">
    <label>Home Sale Price</label>
    <input id="p_price" type="number" value="750000" step="1" />

    <label>Down Payment (cash)</label>
    <input id="p_down" type="number" value="400000" step="1" />

    <label>Interest Rate (annual %)</label>
    <input id="p_rate" type="number" value="5.875" step="0.001" />

    <label>Loan Term (months)</label>
    <input id="p_n" type="number" value="360" step="1" />

    <label>Loan Points (%)</label>
    <input id="p_points_pct" type="number" value="1.5" step="0.01" />

    <label>Origination / Closing Fees (flat)</label>
    <input id="p_orig_fee" type="number" value="1000" step="1" />

    <label>Estimated Annual Property Taxes</label>
    <input id="p_prop_tax" type="number" value="18500" step="1" />

    <label>Insurance (annual)</label>
    <input id="p_insurance_ann" type="number" value="5725" step="1" />

    <label>HOA Monthly Dues</label>
    <input id="p_hoa" type="number" value="0" step="1" />

    <label>PMI Monthly (enter 0 if none)</label>
    <input id="p_pmi" type="number" value="0" step="0.01" />

    <label>(Optional) Down Payment Requirement for 20% (auto shown)</label>
    <input id="p_required20" type="number" value="150000" readonly />
  </div>

  <div class="grid">
    <label>Amount Borrowed (loan principal)</label>
    <input id="p_loan" type="number" readonly />

    <label>Loan Points (amount)</label>
    <input id="p_points_amt" type="number" readonly />

    <label>Monthly Loan Payment (P&I)</label>
    <input id="p_monthly_loan" type="number" readonly />

    <label>Insurance Monthly</label>
    <input id="p_ins_monthly" type="number" readonly />

    <label>Property Tax Monthly (est.)</label>
    <input id="p_prop_monthly" type="number" readonly />

    <label>Total Monthly Payment (est.)</label>
    <input id="p_total_monthly" type="number" readonly />
  </div>

  <div style="display:flex; gap:12px; align-items:center;">
    <button id="p_recalc">Recalculate</button>
  </div>

  <hr/>

  <div class="card">
    <div><strong>Cash due at closing:</strong> <span id="p_cash_due" class="result"></span></div>
    <small>Cash due = Down payment + Loan points amount + Origination/closing fees (points are charged on loan amount).</small>
  </div>
</div>

<!-- Sell panel -->
<div id="sell" class="panel">
  <div class="grid">
    <label>Sale Price</label>
    <input id="s_price" type="number" value="190000" />

    <label>Current Mortgage Balance (owed)</label>
    <input id="s_mort" type="number" value="120000" />

    <label>Agent Commission (%)</label>
    <input id="s_agent_pct" type="number" value="6" step="0.01" />

    <label>Current Annual Property Taxes</label>
    <input id="s_prop_tax" type="number" value="3067" />

    <label>Month Sold (1-12) - used to prorate taxes</label>
    <input id="s_month_sold" type="number" value="10" min="1" max="12" />

    <label>Selling Concessions / Repairs</label>
    <input id="s_repairs" type="number" value="1000" />

    <label>Closing Costs Estimate</label>
    <input id="s_closing" type="number" value="950" />

    <label>Attorney Fees</label>
    <input id="s_atty" type="number" value="500" />

    <label>Tax Credit to Buyer (optional)</label>
    <input id="s_taxcredit" type="number" value="0" />
  </div>

  <div class="grid">
    <label>Total Agent Commissions (calculated)</label>
    <input id="s_agent_amt" type="number" readonly />

    <label>Prorated Property Taxes</label>
    <input id="s_prorated_tax" type="number" readonly />

    <label>Gross Proceeds (Sale Price - Mortgage)</label>
    <input id="s_gross" type="number" readonly />

    <label>Net Proceeds (after fees & credits)</label>
    <input id="s_net" type="number" readonly />
  </div>

  <div style="display:flex; gap:12px; align-items:center;">
    <button id="s_recalc">Calculate</button>
    <small style="margin-left:12px;color:#64748b;">Net Proceeds = Gross - agent comms - prorated taxes - repairs - closing costs - atty fees - tax credit</small>
  </div>
</div>

<footer>
  <div>Notes:</div>
  <ul>
    <li>Monthly mortgage payment uses standard amortization formula.</li>
    <li>Points are computed as <code>loanAmount × points%</code>. Cash due at closing includes points and origination fees in addition to the down payment.</li>
    <li>The prorated taxes assume simple monthly proration: <code>annualTaxes × (monthSold / 12)</code>.</li>
  </ul>
</footer>

<script>
  // Tab behavior
  document.querySelectorAll('.tab').forEach(t => {
    t.addEventListener('click', () => {
      document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
      document.querySelectorAll('.panel').forEach(x=>x.classList.remove('active'));
      t.classList.add('active');
      document.getElementById(t.dataset.target).classList.add('active');
    });
  });

  // Utility: amortization monthly payment
  function monthlyPayment(principal, annualRatePct, nMonths){
    var r = (annualRatePct/100)/12;
    if (r === 0) return principal / nMonths;
    return r * principal / (1 - Math.pow(1 + r, -nMonths));
  }

  // Purchase calculator logic
  function recalcPurchase(){
    const price = parseFloat(document.getElementById('p_price').value) || 0;
    const down = parseFloat(document.getElementById('p_down').value) || 0;
    const rate = parseFloat(document.getElementById('p_rate').value) || 0;
    const n = parseInt(document.getElementById('p_n').value) || 360;
    const pointsPct = parseFloat(document.getElementById('p_points_pct').value) || 0;
    const origFee = parseFloat(document.getElementById('p_orig_fee').value) || 0;
    const propTaxAnn = parseFloat(document.getElementById('p_prop_tax').value) || 0;
    const insAnn = parseFloat(document.getElementById('p_insurance_ann').value) || 0;
    const hoa = parseFloat(document.getElementById('p_hoa').value) || 0;
    const pmi = parseFloat(document.getElementById('p_pmi').value) || 0;

    // loan amount = purchase price - down payment (common)
    const loan = Math.max(0, price - down);


    // points amount = loan * pointsPct/100
    const pointsAmt = loan * (pointsPct/100);

    // monthly payment P&I
    const monthlyLoan = monthlyPayment(loan, rate, n);

    // monthly insurance & tax
    const insMonthly = insAnn / 12;
    const propMonthly = propTaxAnn / 12;

    // total monthly
    const totalMonthly = monthlyLoan + insMonthly + propMonthly + pmi + hoa;

    // cash due at closing: down + points + origFee
    const cashDue = down + pointsAmt + origFee;

    // required 20% down (for display)
    const required20 = price * 0.2;

    // write back
    document.getElementById('p_loan').value = round(loan,2);
    document.getElementById('p_points_amt').value = round(pointsAmt,2);
    document.getElementById('p_monthly_loan').value = round(monthlyLoan,2);
    document.getElementById('p_ins_monthly').value = round(insMonthly,2);
    document.getElementById('p_prop_monthly').value = round(propMonthly,2);
    document.getElementById('p_total_monthly').value = round(totalMonthly,2);
    document.getElementById('p_cash_due').textContent = '$' + formatNumber(round(cashDue,2));
    document.getElementById('p_required20').value = round(required20,2);
  }

  // Sale calculator logic
  function recalcSell(){
    const price = parseFloat(document.getElementById('s_price').value) || 0;
    const mortgage = parseFloat(document.getElementById('s_mort').value) || 0;
    const agentPct = parseFloat(document.getElementById('s_agent_pct').value) || 0;
    const propTax = parseFloat(document.getElementById('s_prop_tax').value) || 0;
    const monthSold = parseFloat(document.getElementById('s_month_sold').value) || 0;
    const repairs = parseFloat(document.getElementById('s_repairs').value) || 0;
    const closing = parseFloat(document.getElementById('s_closing').value) || 0;
    const atty = parseFloat(document.getElementById('s_atty').value) || 0;
    const taxcredit = parseFloat(document.getElementById('s_taxcredit').value) || 0;

    const agentAmt = price * (agentPct/100);
    // prorated taxes: annual * (monthSold / 12)
    const prorated = propTax * (monthSold / 12);

    const gross = price - mortgage;
    let net = gross - agentAmt - prorated - repairs - closing - atty - taxcredit;

    document.getElementById('s_agent_amt').value = round(agentAmt,2);
    document.getElementById('s_prorated_tax').value = round(prorated,2);
    document.getElementById('s_gross').value = round(gross,2);
    document.getElementById('s_net').value = round(net,2);
  }

  function round(v,dec){ return Math.round(v * Math.pow(10,dec))/Math.pow(10,dec); }
  function formatNumber(v){ return v.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2}); }

  // wire up buttons and inputs
  document.getElementById('p_recalc').addEventListener('click', recalcPurchase);
  document.getElementById('s_recalc').addEventListener('click', recalcSell);

  // auto recalc on changes (purchase)
  Array.from(document.querySelectorAll('#purchase input[type="number"]')).forEach(inp=>{
    inp.addEventListener('input', recalcPurchase);
  });
  Array.from(document.querySelectorAll('#sell input[type="number"]')).forEach(inp=>{
    inp.addEventListener('input', recalcSell);
  });

  // run initial calculations with defaults
  recalcPurchase();
  recalcSell();
</script>
</body>
</html>
